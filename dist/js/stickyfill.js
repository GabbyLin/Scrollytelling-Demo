"use strict";!function(c,p){var t=function(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t};function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var e,u=!1,i=void 0!==c;i&&c.getComputedStyle?(e=p.createElement("div"),["","-webkit-","-moz-","-ms-"].some(function(t){try{e.style.position=t+"sticky"}catch(t){}return""!=e.style.position})&&(u=!0)):u=!0;var s=!1,m="undefined"!=typeof ShadowRoot,r={top:null,left:null},a=[];function g(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function _(t){return parseFloat(t)||0}function v(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}var n=(t(f,[{key:"refresh",value:function(){var t,e,i,o,n,s,r,a,f,l,h,d;u||this._removed||(this._active&&this._deactivate(),t=this._node,i={position:(e=getComputedStyle(t)).position,top:e.top,display:e.display,marginTop:e.marginTop,marginBottom:e.marginBottom,marginLeft:e.marginLeft,marginRight:e.marginRight,cssFloat:e.cssFloat},isNaN(parseFloat(i.top))||"table-cell"==i.display||"none"==i.display||(this._active=!0,o=t.style.position,"sticky"!=e.position&&"-webkit-sticky"!=e.position||(t.style.position="static"),n=t.parentNode,s=m&&n instanceof ShadowRoot?n.host:n,r=t.getBoundingClientRect(),a=s.getBoundingClientRect(),f=getComputedStyle(s),this._parent={node:s,styles:{position:s.style.position},offsetHeight:s.offsetHeight},this._offsetToWindow={left:r.left,right:p.documentElement.clientWidth-r.right},this._offsetToParent={top:r.top-a.top-_(f.borderTopWidth),left:r.left-a.left-_(f.borderLeftWidth),right:-r.right+a.right-_(f.borderRightWidth)},this._styles={position:o,top:t.style.top,bottom:t.style.bottom,left:t.style.left,right:t.style.right,width:t.style.width,marginTop:t.style.marginTop,marginLeft:t.style.marginLeft,marginRight:t.style.marginRight},l=_(i.top),this._limits={start:r.top+c.pageYOffset-l,end:a.top+c.pageYOffset+s.offsetHeight-_(f.borderBottomWidth)-t.offsetHeight-l-_(i.marginBottom)},"absolute"!=(h=f.position)&&"relative"!=h&&(s.style.position="relative"),this._recalcPosition(),(d=this._clone={}).node=p.createElement("div"),g(d.node.style,{width:r.right-r.left+"px",height:r.bottom-r.top+"px",marginTop:i.marginTop,marginBottom:i.marginBottom,marginLeft:i.marginLeft,marginRight:i.marginRight,cssFloat:i.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),n.insertBefore(d.node,t),d.docOffsetTop=v(d.node)))}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var t=r.top<=this._limits.start?"start":r.top>=this._limits.end?"end":"middle";if(this._stickyMode!=t){switch(t){case"start":g(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":g(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":g(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=t}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(1<Math.abs(v(this._clone.node)-this._clone.docOffsetTop)||1<Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight))&&this.refresh()}},{key:"_deactivate",value:function(){var e=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,g(this._node.style,this._styles),delete this._styles,a.some(function(t){return t!==e&&t._parent&&t._parent.node===e._parent.node})||g(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var i=this;this._deactivate(),a.some(function(t,e){if(t._node===i._node)return a.splice(e,1),!0}),this._removed=!0}}]),f);function f(e){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),!(e instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(a.some(function(t){return t._node===e}))throw new Error("Stickyfill is already applied to this node");this._node=e,this._stickyMode=null,this._active=!1,a.push(this),this.refresh()}var l={stickies:a,Sticky:n,forceSticky:function(){u=!1,h(),this.refreshAll()},addOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}for(var e=0;e<a.length;e++)if(a[e]._node===t)return a[e];return new n(t)},add:function(i){if(i instanceof HTMLElement&&(i=[i]),i.length){for(var o=[],t=0;t<i.length;t++)(function(t){var e=i[t];e instanceof HTMLElement?a.some(function(t){if(t._node===e)return o.push(t),!0})||o.push(new n(e)):o.push(void 0)})(t);return o}},refreshAll:function(){a.forEach(function(t){return t.refresh()})},removeOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}a.some(function(t){if(t._node===e)return t.remove(),!0})},remove:function(i){if(i instanceof HTMLElement&&(i=[i]),i.length)for(var t=0;t<i.length;t++)!function(t){var e=i[t];a.some(function(t){if(t._node===e)return t.remove(),!0})}(t)},removeAll:function(){for(;a.length;)a[0].remove()}};function h(){var t,e,i;function o(){c.pageXOffset!=r.left?(r.top=c.pageYOffset,r.left=c.pageXOffset,l.refreshAll()):c.pageYOffset!=r.top&&(r.top=c.pageYOffset,r.left=c.pageXOffset,a.forEach(function(t){return t._recalcPosition()}))}function n(){t=setInterval(function(){a.forEach(function(t){return t._fastCheck()})},500)}s||(s=!0,o(),c.addEventListener("scroll",o),c.addEventListener("resize",l.refreshAll),c.addEventListener("orientationchange",l.refreshAll),i=e=t=void 0,"hidden"in p?(e="hidden",i="visibilitychange"):"webkitHidden"in p&&(e="webkitHidden",i="webkitvisibilitychange"),i?(p[e]||n(),p.addEventListener(i,function(){p[e]?clearInterval(t):n()})):n())}u||h(),"undefined"!=typeof module&&module.exports?module.exports=l:i&&(c.Stickyfill=l)}(window,document);